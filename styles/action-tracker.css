/* ============================================================
   ECHOES OF BAPHOMET — ACTION TRACKER CSS v1.0
   Military Noir aesthetic. Sharp transitions, not soft fades.

   Visual Language:
   ◆ Gold    = Action (available)
   ◆ Teal    = Reaction (available)
   ◆ Steel   = Combat Reflexes AoO-only (available)
   ◆ Ash     = Spent (dark, cold, mechanical)
   ◆ Crimson = Condition-locked (lost, non-recoverable this turn)
   ============================================================ */

/* --- Pip Row Container --- */
.baph-action-tracker {
  display: flex;
  gap: 4px;
  align-items: center;
  padding: 2px 6px;
  margin: 1px 0;
  min-height: 18px;
  user-select: none;
}

/* --- Base Pip --- */
.baph-pip {
  width: 13px;
  height: 13px;
  border-radius: 2px;
  cursor: pointer;
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.3);

  /* SHARP transition — cold mechanical snap, not a gentle fade */
  transition: background-color 0.05s step-end,
              opacity 0.05s step-end,
              border-color 0.05s step-end,
              box-shadow 0.05s step-end;
}

.baph-pip:hover {
  border-color: rgba(255, 255, 255, 0.25);
  filter: brightness(1.15);
}

/* --- Action Pips (Gold) --- */
.baph-pip.action {
  background-color: var(--baph-gold, #b8943e);
  border-color: rgba(184, 148, 62, 0.4);
}

/* --- Reaction Pip (Teal) --- */
.baph-pip.reaction {
  background-color: #5a9a9a;
  border-color: rgba(90, 154, 154, 0.4);
}

/* --- Combat Reflexes Pip (Steel Blue) --- */
.baph-pip.combat-reflex {
  background-color: #4a7ab5;
  border-color: rgba(74, 122, 181, 0.4);
}

/* --- SPENT STATE ---
   Cold. Mechanical. The action is gone. */
.baph-pip.spent {
  background-color: #1a1c20;
  opacity: 0.28;
  border-color: rgba(255, 255, 255, 0.03);
  box-shadow: none;
}

.baph-pip.spent:hover {
  opacity: 0.45;
  border-color: rgba(255, 255, 255, 0.12);
  filter: none;
}

/* --- CONDITION-LOCKED STATE ---
   Crimson tint. You didn't choose to lose this.
   Cannot be toggled back. Cursor reflects that. */
.baph-pip.condition-locked {
  background-color: #5c1a1a;
  opacity: 0.50;
  border-color: rgba(140, 32, 32, 0.3);
  box-shadow: inset 0 0 3px rgba(140, 32, 32, 0.5);
  cursor: not-allowed;
}

.baph-pip.condition-locked:hover {
  filter: none;
  border-color: rgba(140, 32, 32, 0.5);
}

/* --- Separator between Actions and Reactions --- */
.baph-pip-separator {
  width: 1px;
  height: 11px;
  background-color: rgba(255, 255, 255, 0.10);
  margin: 0 1px;
  flex-shrink: 0;
}

/* --- Active Combatant Highlight ---
   Subtle glow on pips for whoever's turn it is. */
.combatant.active .baph-action-tracker .baph-pip.action:not(.spent):not(.condition-locked) {
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.3),
              0 0 4px rgba(184, 148, 62, 0.35);
}

.combatant.active .baph-action-tracker .baph-pip.reaction:not(.spent) {
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.3),
              0 0 4px rgba(90, 154, 154, 0.35);
}

.combatant.active .baph-action-tracker .baph-pip.combat-reflex:not(.spent) {
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.3),
              0 0 4px rgba(74, 122, 181, 0.35);
}
