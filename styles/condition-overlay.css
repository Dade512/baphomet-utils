/* ============================================================
   CONDITION OVERLAY v2.3 — UI Styles
   Gaslamp Gothic | Croaker's Ledger edition
   A brass-and-leather bookmark clipped to the open page.
   No neon. No dark void backgrounds.
   ============================================================ */

/* --- HUD Button --- */
.baph-condition-hud-btn {
  cursor: pointer;
  /* Make the icon readable against whatever the HUD background is */
  color: var(--baph-parchment-bright, #e8dfd0);
  transition: color 0.15s;
}

.baph-condition-hud-btn:hover {
  color: var(--baph-brass-bright, #b8943e);
}

/* --- Panel Container (anchored to Token HUD) ---
   Fixed position — attached to the HUD button rect by JS.
   Acts as a physical clip, not a floating UI pane. */
#baph-overlay-panel,
.baph-condition-container {
  position: absolute;
  right: 52px;
  top: 0;
  z-index: 100;
  width: 290px;
  display: grid;
  grid-template-rows: auto 1fr;
}

/* --- Condition Panel Wrapper ---
   An index card made of aged parchment,
   bound with a brass spine on top.
   Physical depth through shadow only — no glow. */
.baph-condition-panel {
  background: var(--baph-parchment-mid, #d1c6b4);
  border: 1px solid var(--baph-leather-mid, #8a7b66);
  border-top: 3px solid var(--baph-brass, #9e7d43);  /* brass header band */
  border-radius: 0;
  padding: 6px;
  display: grid;
  grid-template-rows: auto 1fr;
  /* Card lifted slightly from the page */
  box-shadow: 2px 4px 12px rgba(42, 35, 29, 0.4),
              inset 0 1px 0 rgba(232, 223, 208, 0.5);
  max-height: 480px;
}

/* --- Section Headers (pinned, don't scroll) ---
   Stamped heading text — like a rubric marker in an old manuscript. */
.baph-section-header {
  font-family: var(--baph-font-heading, 'Courier Prime', monospace);
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  color: var(--baph-ink-secondary, #5e5246);
  padding: 5px 6px 2px;
  border-bottom: 1px solid var(--baph-leather-mid, #8a7b66);
  margin-top: 2px;
  user-select: none;
}

/* --- Scrollable Conditions Grid ---
   Slightly recessed ruled area — like the lined interior
   of the index card, pressed in. */
.baph-conditions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
  gap: 6px;
  padding: 6px 4px;
  overflow-y: auto;
  /* Sunken ruled section */
  background: var(--baph-parchment-dark, #beb09b);
  box-shadow: inset 0 2px 6px rgba(42, 35, 29, 0.15),
              inset 0 -1px 4px rgba(42, 35, 29, 0.08);
}

/* Sub-section labels within the grid */
.baph-conditions-grid > div[style*="grid-column"] {
  font-family: var(--baph-font-heading, monospace) !important;
  color: var(--baph-ink-faint, #8a7b6e) !important;
  border-bottom-color: var(--baph-leather-mid, #8a7b66) !important;
}

/* --- Condition Row (grid cells) ---
   Each row is a line in the index card's field notes.
   Column flex: label on top, tier-group below.
   justify-content: space-between keeps them flush to
   top and bottom of the cell without floating. */
.baph-condition-row {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: space-between;
  padding: 4px 6px;
  border-radius: 0;
  background: var(--baph-parchment-light, #ddd3c0);
  border: 1px solid transparent;
  border-left: 2px solid transparent;
  transition: border-color 0.15s ease, background 0.15s ease;
  min-height: 52px;   /* enough room for label + button row without crowding */
  position: relative;
  box-sizing: border-box;
}

/* Active state — brass left-rail, like a bookmarked entry */
.baph-condition-row.active {
  border-left-color: var(--baph-brass, #9e7d43);
  border-color: var(--baph-leather-mid, #8a7b66);
  background: var(--baph-parchment-bright, #e8dfd0);
}

/* Ink Bleed on Hover — corrupted edge SVG filter from JS.
   Blood red edge + torn parchment fringe. */
.baph-condition-row:hover {
  border-color: rgba(110, 42, 34, 0.4);
  background: rgba(190, 176, 155, 0.85);
  filter: url(#baph-corrupted-edge);
}

.baph-condition-row.active:hover {
  border-left-color: var(--baph-brass, #9e7d43);
  border-color: rgba(110, 42, 34, 0.35);
  background: var(--baph-parchment-bright, #e8dfd0);
  filter: url(#baph-corrupted-edge);
}

/* --- Condition Label ---
   Faded iron gall ink. Uppercase small caps feel. */
.baph-condition-label {
  font-family: var(--baph-font-heading, 'Courier Prime', monospace);
  text-transform: uppercase;
  letter-spacing: 0.04em;
  font-size: 10px;
  color: var(--baph-ink-secondary, #5e5246);
  cursor: help;
  margin-bottom: 0;   /* space-between on parent handles the gap */
  line-height: 1.2;
}

/* Active condition label — full strength ink */
.baph-condition-row.active .baph-condition-label {
  color: var(--baph-ink-primary, #2a231d);
  font-weight: 600;
}

/* --- Auto-Decrement Indicator --- */
.baph-auto-indicator {
  font-size: 10px;
  color: var(--baph-brass, #9e7d43);
  margin-left: 3px;
  cursor: help;
  opacity: 0.7;
}

.baph-condition-row.active .baph-auto-indicator {
  opacity: 1;
  color: var(--baph-blood, #6e2a22);
}

/* --- Tier Button Group --- */
.baph-tier-group {
  display: flex;
  flex-direction: row;
  align-items: center;
  gap: 2px;
  flex-shrink: 0;
  width: 100%;
  margin-top: 0;   /* space-between on .baph-condition-row handles vertical gap */
}

/* --- Tier Buttons ---
   Brass rivets pressed into the card.
   Physical: inset shadow gives depth. No glow. */
.baph-tier-btn {
  flex: 1;
  min-width: 0;
  height: 20px;
  padding: 0;
  margin: 0;
  border: 1px solid var(--baph-leather-mid, #8a7b66);
  border-radius: 0;
  background: var(--baph-parchment-mid, #d1c6b4);
  color: var(--baph-ink-secondary, #5e5246);
  font-family: var(--baph-font-mono, 'IBM Plex Mono', monospace);
  font-size: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.10s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  /* Physical surface — raised from card */
  box-shadow: inset 0 1px 0 rgba(232, 223, 208, 0.6),
              inset 0 -1px 0 rgba(42, 35, 29, 0.15),
              0 1px 2px rgba(42, 35, 29, 0.15);
}

.baph-tier-btn:hover {
  background: var(--baph-parchment-light, #ddd3c0);
  color: var(--baph-brass, #9e7d43);
  border-color: var(--baph-brass, #9e7d43);
  box-shadow: inset 0 2px 4px rgba(42, 35, 29, 0.12);
}

/* Selected tier — pressed brass rivet, full gold */
.baph-tier-btn.selected {
  background: var(--baph-brass, #9e7d43);
  color: var(--baph-parchment-bright, #e8dfd0);
  border-color: var(--baph-leather-dark, #6b5c4a);
  font-weight: 700;
  /* Pressed in — deeper inset */
  box-shadow: inset 0 2px 5px rgba(42, 35, 29, 0.4),
              0 0 0 1px rgba(107, 92, 74, 0.3);
}

/* Remove button — dried blood tone */
.baph-btn-remove {
  color: var(--baph-blood, #6e2a22);
  font-size: 9px;
  flex: 0 0 20px;
}

.baph-btn-remove:hover {
  background: var(--baph-blood, #6e2a22);
  color: var(--baph-parchment-bright, #e8dfd0);
  border-color: var(--baph-blood-bright, #8b3028);
  box-shadow: inset 0 2px 4px rgba(42, 35, 29, 0.4);
}

.baph-tier-btn.disabled {
  opacity: 0.30;
  cursor: default;
  pointer-events: none;
}

/* --- Toggle Rows ---
   Single-line row: label left, button right.
   Explicit display:flex here because the base .baph-condition-row
   is flex-direction:column — this override needs its own axis. */
.baph-toggle-row {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  gap: 6px;
  min-height: 32px;   /* shorter than tiered rows — no button group below */
}

.baph-toggle-label {
  flex: 1;
  margin-bottom: 0;
  align-self: center;
  line-height: 1.2;
}

/* --- Toggle Button ---
   Leather tag on the card — a physical ON/OFF latch.
   No neon. No rounded pill. Hard stamped square.
   display:flex + align/justify center ensures the text
   sits truly centered regardless of font metrics or line-height. */
.baph-toggle-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 22px;      /* slightly taller to seat 11px text cleanly */
  padding: 0;
  margin: 0;
  border: 1px solid var(--baph-leather-mid, #8a7b66);
  border-radius: 0;
  background: var(--baph-parchment-mid, #d1c6b4);
  color: var(--baph-ink-secondary, #5e5246);
  font-family: var(--baph-font-heading, 'Courier Prime', monospace);
  font-size: 11px;
  font-weight: 700;
  line-height: 1;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  cursor: pointer;
  transition: all 0.10s ease;
  flex-shrink: 0;
  align-self: center;
  box-shadow: inset 0 1px 0 rgba(232, 223, 208, 0.6),
              inset 0 -1px 0 rgba(42, 35, 29, 0.15),
              0 1px 2px rgba(42, 35, 29, 0.15);
}

.baph-toggle-btn:hover {
  background: var(--baph-parchment-light, #ddd3c0);
  color: var(--baph-brass, #9e7d43);
  border-color: var(--baph-brass, #9e7d43);
  box-shadow: inset 0 2px 4px rgba(42, 35, 29, 0.12);
}

/* Active/latched — brass tag, text reads against gold */
.baph-toggle-btn.active {
  background: var(--baph-brass, #9e7d43);
  color: var(--baph-parchment-bright, #e8dfd0);
  border-color: var(--baph-leather-dark, #6b5c4a);
  box-shadow: inset 0 2px 5px rgba(42, 35, 29, 0.4);
}

/* --- Panel Scrollbar --- */
.baph-conditions-grid::-webkit-scrollbar { width: 4px; }
.baph-conditions-grid::-webkit-scrollbar-track {
  background: var(--baph-parchment-dark, #beb09b);
}
.baph-conditions-grid::-webkit-scrollbar-thumb {
  background: var(--baph-leather-mid, #8a7b66);
}
.baph-conditions-grid::-webkit-scrollbar-thumb:hover {
  background: var(--baph-brass, #9e7d43);
}

/* Legacy scrollbar fallback */
.baph-condition-panel::-webkit-scrollbar { width: 4px; }
.baph-condition-panel::-webkit-scrollbar-track {
  background: var(--baph-parchment-dark, #beb09b);
}
.baph-condition-panel::-webkit-scrollbar-thumb {
  background: var(--baph-leather-mid, #8a7b66);
}
