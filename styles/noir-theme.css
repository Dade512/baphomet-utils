/* ============================================================
   BAPHOMET-UTILS — NOIR THEME
   Version: 2.4.0 — "Croaker's Ledger"
   Gaslamp Gothic | PF1e Sheet + Foundry V13

   The Black Company. Mud, grit, blood, and history.
   A battered, weather-beaten mercenary ledger.
   Parchment that's been rained on. Leather that's been
   cut, oiled, and cut again. Ink that's half iron gall,
   half campaign season.

   CONTRAST MODEL (REVERSED FROM v2.3.x):
   - Backgrounds: mid-tone muddy parchment
   - Text: dark oxidized iron gall ink
   - Accents: tarnished brass, dried blood
   - NO dark backgrounds. NO light text. NO neon.
   ============================================================

   CHANGELOG
   v2.4.0 — "Croaker's Ledger" — Full theme pivot
              • Abandoned dark lampblack aesthetic
              • Backgrounds now muddy parchment / scuffed leather
              • Text inverted to dark oxidized iron gall ink
              • Removed all v2.3.2 !important light-text overrides
                (no longer needed — system default dark ink works)
              • Brass/blood accent model updated for light backgrounds
              • Sidebar/window chrome uses scuffed leather tones
              • action-tracker.css + condition-overlay.css updated
                to match ledger aesthetic (see those files)
   v2.3.2 — Item name / Buff list contrast pass
   v2.3.1 — Hotfix: Buffs tab item names invisible
   v2.3.0 — Accessibility pass: sidebar, compendium, PF1e sheet
   v2.2.0 — Gaslamp Gothic palette overhaul, layout/logic bug fixes

   PALETTE REFERENCE — CROAKER'S LEDGER
   --baph-parchment-dark    #beb09b  (mud-stained, worn)
   --baph-parchment-mid     #d1c6b4  (field parchment, main bg)
   --baph-parchment-light   #ddd3c0  (cleaner page interior)
   --baph-parchment-bright  #e8dfd0  (fresh inner leaf — MAX brightness)
   --baph-leather-dark      #6b5c4a  (old belt leather)
   --baph-leather-mid       #8a7b66  (scuffed field leather)
   --baph-leather-light     #a08e78  (oiled edge leather)
   --baph-ink-primary       #2a231d  (oxidized iron gall ink)
   --baph-ink-secondary     #5e5246  (watered-down, faded ink)
   --baph-ink-faint         #8a7b6e  (ghost impression on parchment)
   --baph-brass             #9e7d43  (tarnished brass hardware)
   --baph-brass-bright      #b8943e  (polished brass edge — lamplight)
   --baph-blood             #6e2a22  (dried, old blood)
   --baph-blood-bright      #8b3028  (fresher wound)
   --baph-font-heading      'Courier Prime'
   --baph-font-body         'Alegreya'
   --baph-font-mono         'IBM Plex Mono'
   ============================================================ */

/* ============================================================
   1. CSS CUSTOM PROPERTIES
   ============================================================ */
:root {
  /* Parchment scale */
  --baph-parchment-dark:    #beb09b;
  --baph-parchment-mid:     #d1c6b4;
  --baph-parchment-light:   #ddd3c0;
  --baph-parchment-bright:  #e8dfd0;

  /* Leather scale */
  --baph-leather-dark:      #6b5c4a;
  --baph-leather-mid:       #8a7b66;
  --baph-leather-light:     #a08e78;

  /* Ink scale (DARK — on light parchment) */
  --baph-ink-primary:       #2a231d;
  --baph-ink-secondary:     #5e5246;
  --baph-ink-faint:         #8a7b6e;

  /* Accent metals */
  --baph-brass:             #9e7d43;
  --baph-brass-bright:      #b8943e;

  /* Wound / danger */
  --baph-blood:             #6e2a22;
  --baph-blood-bright:      #8b3028;

  /* ── Legacy variable aliases ──────────────────────────────
     Keep these so action-tracker.css and condition-overlay.css
     can reference them without a full rewrite of every var().
     They map to their Ledger equivalents. */
  --baph-bg-dark:           var(--baph-parchment-dark);
  --baph-bg-mid:            var(--baph-parchment-mid);
  --baph-bg-light:          var(--baph-parchment-light);
  --baph-bg-surface:        var(--baph-parchment-bright);
  --baph-bg-darkest:        var(--baph-leather-dark);
  --baph-bg-lighter:        var(--baph-parchment-bright);
  --baph-border:            var(--baph-leather-mid);
  --baph-border-light:      var(--baph-leather-light);
  --baph-text-primary:      var(--baph-ink-primary);
  --baph-text-bright:       var(--baph-ink-primary);
  --baph-text-label:        var(--baph-ink-secondary);
  --baph-text-secondary:    var(--baph-ink-secondary);
  --baph-text-muted:        var(--baph-ink-faint);
  --baph-gold:              var(--baph-brass-bright);
  --baph-gold-bright:       var(--baph-brass-bright);
  --baph-gold-dim:          var(--baph-brass);
  --baph-danger:            var(--baph-blood);
  --baph-danger-bright:     var(--baph-blood-bright);
  --baph-red:               var(--baph-blood);

  /* Fonts */
  --baph-font-heading:      'Courier Prime', 'Courier New', monospace;
  --baph-font-body:         'Alegreya', Georgia, serif;
  --baph-font-mono:         'IBM Plex Mono', 'Courier New', monospace;
}

/* ============================================================
   2. FOUNDRY APPLICATION CHROME
   ============================================================ */
#interface,
.app,
.window-app {
  font-family: var(--baph-font-body);
  color: var(--baph-ink-primary);
}

/* Window header — scuffed leather border and frame */
.window-app .window-header {
  background: var(--baph-leather-mid);
  border-bottom: 2px solid var(--baph-leather-dark);
  font-family: var(--baph-font-heading);
  color: var(--baph-parchment-bright);
  letter-spacing: 0.04em;
  /* Physical leather cover — inset shadow, not glow */
  box-shadow: 0 2px 6px rgba(42, 35, 29, 0.4),
              inset 0 1px 0 rgba(232, 223, 208, 0.12);
}

.window-app .window-header .window-title {
  color: var(--baph-parchment-bright);
  font-family: var(--baph-font-heading);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* Window content — field parchment interior */
.window-app .window-content {
  background: var(--baph-parchment-mid);
  color: var(--baph-ink-primary);
}

/* Window border — tooled leather edge */
.window-app {
  border: 2px solid var(--baph-leather-mid);
  box-shadow: 0 4px 16px rgba(42, 35, 29, 0.45),
              inset 0 0 0 1px rgba(190, 176, 155, 0.3);
}

/* ============================================================
   3. PF1 ACTOR SHEET — GLOBAL FOUNDATION
   ============================================================ */
.pf1.sheet.actor {
  background: var(--baph-parchment-mid);
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-body);
}

/* Sheet header — slightly darker worn parchment */
.pf1.sheet.actor .sheet-header {
  background: var(--baph-parchment-dark);
  border-bottom: 2px solid var(--baph-leather-mid);
  box-shadow: 0 2px 6px rgba(42, 35, 29, 0.2);
}

/* Actor name in header */
.pf1.sheet.actor .sheet-header .charname input,
.pf1.sheet.actor .actor-name,
.pf1.sheet.actor h1.charname {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-heading);
  text-shadow: none;
}

/* Form fields */
.pf1.sheet.actor input,
.pf1.sheet.actor select,
.pf1.sheet.actor textarea {
  background: var(--baph-parchment-bright);
  color: var(--baph-ink-primary);
  border: 1px solid var(--baph-leather-mid);
  font-family: var(--baph-font-body);
}

.pf1.sheet.actor input:focus,
.pf1.sheet.actor select:focus,
.pf1.sheet.actor textarea:focus {
  border-color: var(--baph-brass);
  outline: none;
  box-shadow: 0 0 0 1px var(--baph-brass);
}

/* ============================================================
   4. PF1 SHEET — TAB NAVIGATION
   ============================================================ */
.pf1.sheet.actor .tabs {
  background: var(--baph-parchment-dark);
  border-bottom: 1px solid var(--baph-leather-mid);
}

.pf1.sheet.actor .tabs .item {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  letter-spacing: 0.03em;
  border-bottom: 2px solid transparent;
  transition: color 0.15s, border-color 0.15s;
}

.pf1.sheet.actor .tabs .item:hover {
  color: var(--baph-ink-primary);
  border-bottom-color: var(--baph-leather-mid);
}

.pf1.sheet.actor .tabs .item.active {
  color: var(--baph-blood);
  border-bottom-color: var(--baph-blood);
}

/* ============================================================
   5. PF1 SHEET — THREE-TIER MECHANICAL HIERARCHY
      dim label → bright value → brass modifier
      All dark ink on parchment. No light text.
   ============================================================ */

/* Labels — faded ink, slightly smaller */
.pf1.sheet.actor .attribute label,
.pf1.sheet.actor .skill-name,
.pf1.sheet.actor .saving-throw label,
.pf1.sheet.actor label {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  font-size: 0.75em;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

/* Values — full-strength ink */
.pf1.sheet.actor .attribute .attribute-value,
.pf1.sheet.actor .skill-mod,
.pf1.sheet.actor .saving-throw .saving-throw-total,
.pf1.sheet.actor input[type="text"],
.pf1.sheet.actor input[type="number"] {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-mono);
}

/* Modifiers / bonuses — tarnished brass */
.pf1.sheet.actor .attribute .attribute-mod,
.pf1.sheet.actor .skill-cs,
.pf1.sheet.actor .attribute-modifiers {
  color: var(--baph-brass);
  font-family: var(--baph-font-mono);
  font-weight: 600;
}

/* ============================================================
   6. PF1 SHEET — ITEM LISTS (Inventory, Spells, Features, etc.)
   ============================================================ */
.pf1.sheet.actor .item-list {
  background: transparent;
}

/* Item rows — subtle alternation on the parchment */
.pf1.sheet.actor .item-list .item {
  background: rgba(190, 176, 155, 0.3);
  border-bottom: 1px solid var(--baph-leather-mid);
  color: var(--baph-ink-primary);
  transition: background 0.1s;
}

.pf1.sheet.actor .item-list .item:hover {
  background: rgba(158, 125, 67, 0.12);
}

/* Item list headers / category rows */
.pf1.sheet.actor .item-list .item-header,
.pf1.sheet.actor .item-list h3,
.pf1.sheet.actor .item-list .inventory-header {
  background: var(--baph-parchment-dark);
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  letter-spacing: 0.04em;
  border-bottom: 2px solid var(--baph-leather-mid);
  text-transform: uppercase;
  font-size: 0.75em;
}

/* ============================================================
   7. ITEM NAME TEXT — LET THE SYSTEM DEFAULT WORK
      v2.3.2 forced light text with !important overrides.
      Those are GONE. PF1e's default dark item name text
      reads correctly on parchment backgrounds without any
      overrides from us. We only need to set font-family.
   ============================================================ */
.pf1.sheet.actor .item-list .item .item-name h4,
.pf1.sheet.actor .item-list .item .item-name a {
  font-family: var(--baph-font-body);
  font-weight: normal;
  text-decoration: none;
  /* No color override — system default dark text is correct on parchment */
}

/* ============================================================
   8. DISABLED / INACTIVE ITEMS
      Faded, watered-down ink. Still legible against parchment.
      Italic — the mark of a crossed-out ledger entry.
   ============================================================ */
.pf1.sheet.actor .item-list .item.disabled .item-name h4,
.pf1.sheet.actor .item-list .item.disabled .item-name a,
.pf1.sheet.actor .item-list .item.inactive .item-name h4,
.pf1.sheet.actor .item-list .item.inactive .item-name a {
  color: var(--baph-ink-faint);
  opacity: 0.80;
  font-style: italic;
  text-decoration: none;
}

/* ============================================================
   9. ITEM NAME HOVER STATE
      Dried blood — visceral. The mark you notice.
   ============================================================ */
.pf1.sheet.actor .item-list .item .item-name h4:hover,
.pf1.sheet.actor .item-list .item .item-name a:hover {
  color: var(--baph-blood);
  text-decoration: none;
  cursor: pointer;
}

/* Disabled hover — muted blood, still readable */
.pf1.sheet.actor .item-list .item.disabled .item-name h4:hover,
.pf1.sheet.actor .item-list .item.disabled .item-name a:hover,
.pf1.sheet.actor .item-list .item.inactive .item-name h4:hover,
.pf1.sheet.actor .item-list .item.inactive .item-name a:hover {
  color: var(--baph-blood);
  opacity: 0.55;
  text-decoration: none;
}

/* ============================================================
   10. PF1 SHEET — BUFFS TAB
   ============================================================ */
.pf1.sheet.actor .tab.buffs {
  background: var(--baph-parchment-mid);
  color: var(--baph-ink-primary);
}

/* Buff toggle controls */
.pf1.sheet.actor .item-list .item .item-controls,
.pf1.sheet.actor .item-list .item .buff-controls {
  color: var(--baph-ink-faint);
}

.pf1.sheet.actor .item-list .item .item-controls a:hover,
.pf1.sheet.actor .item-list .item .buff-controls a:hover {
  color: var(--baph-brass);
}

/* Buff level / duration display */
.pf1.sheet.actor .item-list .item .buff-level,
.pf1.sheet.actor .item-list .item .item-uses {
  color: var(--baph-brass);
  font-family: var(--baph-font-mono);
  font-weight: 600;
}

/* ============================================================
   11. PF1 SHEET — SPELLS TAB
   ============================================================ */
.pf1.sheet.actor .tab.spellbook {
  background: var(--baph-parchment-mid);
}

.pf1.sheet.actor .spell-level-label {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  letter-spacing: 0.05em;
  text-transform: uppercase;
  background: var(--baph-parchment-dark);
  border-bottom: 1px solid var(--baph-leather-mid);
}

.pf1.sheet.actor .item-list .item .spell-uses,
.pf1.sheet.actor .item-list .item .spell-slots {
  color: var(--baph-brass);
  font-family: var(--baph-font-mono);
  font-weight: 600;
}

/* ============================================================
   12. PF1 SHEET — ATTRIBUTES TAB (Combat Stats)
   ============================================================ */
.pf1.sheet.actor .tab.attributes {
  background: var(--baph-parchment-mid);
}

.pf1.sheet.actor .combat-attacks .attack-header {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  letter-spacing: 0.04em;
  text-transform: uppercase;
}

.pf1.sheet.actor .bab-total,
.pf1.sheet.actor .cmb-total,
.pf1.sheet.actor .cmd-total {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-mono);
  font-weight: 700;
}

/* ============================================================
   13. SIDEBAR & COMPENDIUM
       Scuffed leather — darker and heavier than sheet interior.
   ============================================================ */
#sidebar,
#sidebar .sidebar-tab {
  background: var(--baph-leather-mid);
  color: var(--baph-parchment-bright);
  border-left: 2px solid var(--baph-leather-dark);
  font-family: var(--baph-font-body);
}

#sidebar .directory-header {
  background: var(--baph-leather-dark);
  color: var(--baph-parchment-light);
  font-family: var(--baph-font-heading);
  border-bottom: 1px solid var(--baph-leather-dark);
  letter-spacing: 0.04em;
  text-transform: uppercase;
  font-size: 0.75em;
}

/* Sidebar search/filter */
#sidebar input[type="search"],
#sidebar input[type="text"] {
  background: rgba(190, 176, 155, 0.2);
  color: var(--baph-parchment-bright);
  border: 1px solid var(--baph-leather-dark);
}

#sidebar input[type="search"]:focus,
#sidebar input[type="text"]:focus {
  border-color: var(--baph-brass);
  box-shadow: 0 0 0 1px var(--baph-brass);
  outline: none;
}

/* Sidebar entries — parchment cards on leather */
#sidebar .directory-list .directory-item {
  color: var(--baph-parchment-light);
  border-bottom: 1px solid rgba(107, 92, 74, 0.5);
  transition: background 0.1s, color 0.1s;
}

#sidebar .directory-list .directory-item:hover {
  background: rgba(190, 176, 155, 0.15);
  color: var(--baph-parchment-bright);
}

#sidebar .directory-list .directory-item.active {
  color: var(--baph-brass-bright);
  background: rgba(158, 125, 67, 0.2);
}

/* Sidebar folder headers */
#sidebar .folder > .folder-header {
  background: rgba(107, 92, 74, 0.6);
  color: var(--baph-parchment-light);
  font-family: var(--baph-font-heading);
}

/* Compendium entries */
.compendium .entry-name {
  color: var(--baph-parchment-light);
  font-family: var(--baph-font-body);
}

.compendium .entry-name:hover {
  color: var(--baph-brass-bright);
}

/* ============================================================
   14. CHAT LOG
   ============================================================ */
#chat {
  background: var(--baph-parchment-mid);
}

#chat-log .message {
  background: var(--baph-parchment-bright);
  border: 1px solid var(--baph-leather-mid);
  border-left: 3px solid var(--baph-leather-mid);
  color: var(--baph-ink-primary);
  margin-bottom: 3px;
  box-shadow: 0 1px 3px rgba(42, 35, 29, 0.12);
}

#chat-log .message .message-header {
  background: var(--baph-parchment-dark);
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-heading);
  border-bottom: 1px solid var(--baph-leather-mid);
  font-size: 0.8em;
  letter-spacing: 0.03em;
}

/* Speaker name in message header */
#chat-log .message .message-header .alias {
  color: var(--baph-ink-primary);
  font-weight: 700;
}

#chat-log .message .message-content {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-body);
}

/* Whisper — dried blood border, like a sealed order */
#chat-log .message.whisper {
  border-left-color: var(--baph-blood);
  background: color-mix(in srgb, var(--baph-parchment-bright) 88%, var(--baph-blood) 12%);
}

/* Roll results */
#chat-log .dice-total {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-mono);
  font-weight: bold;
  font-size: 1.2em;
}

#chat-log .dice-total.success {
  color: var(--baph-brass);
}

#chat-log .dice-total.failure {
  color: var(--baph-blood);
}

/* Dice formula text */
#chat-log .dice-formula {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-mono);
  font-size: 0.85em;
}

/* Roll tooltip/flavor */
#chat-log .message .flavor-text,
#chat-log .message .message-flavor {
  color: var(--baph-ink-secondary);
  font-family: var(--baph-font-body);
  font-style: italic;
  font-size: 0.9em;
}

/* ============================================================
   15. HOTBAR & UI CONTROLS
   ============================================================ */
#hotbar {
  background: var(--baph-leather-dark);
  border-top: 2px solid var(--baph-leather-mid);
  box-shadow: 0 -2px 8px rgba(42, 35, 29, 0.4);
}

#hotbar .bar-slot {
  background: var(--baph-parchment-dark);
  border: 1px solid var(--baph-leather-mid);
  color: var(--baph-ink-secondary);
  transition: border-color 0.15s, background 0.15s;
}

#hotbar .bar-slot:hover {
  border-color: var(--baph-brass);
  background: var(--baph-parchment-mid);
}

#controls {
  background: var(--baph-leather-dark);
  border-right: 2px solid var(--baph-leather-mid);
}

#controls .control-tool {
  color: var(--baph-parchment-dark);
  transition: color 0.15s;
}

#controls .control-tool:hover,
#controls .control-tool.active {
  color: var(--baph-brass-bright);
}

/* ============================================================
   16. DIALOGS & NOTIFICATIONS
   ============================================================ */
.dialog {
  border: 2px solid var(--baph-leather-mid);
}

.dialog .dialog-content {
  background: var(--baph-parchment-mid);
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-body);
}

.dialog .dialog-buttons button {
  background: var(--baph-parchment-dark);
  color: var(--baph-ink-primary);
  border: 1px solid var(--baph-leather-mid);
  font-family: var(--baph-font-heading);
  letter-spacing: 0.03em;
  transition: background 0.15s, color 0.15s, border-color 0.15s;
  box-shadow: inset 0 1px 0 rgba(232, 223, 208, 0.4),
              inset 0 -1px 0 rgba(42, 35, 29, 0.2);
}

.dialog .dialog-buttons button:hover {
  background: var(--baph-parchment-light);
  color: var(--baph-blood);
  border-color: var(--baph-blood);
}

#notifications .notification {
  background: var(--baph-parchment-dark);
  color: var(--baph-ink-primary);
  border-left: 3px solid var(--baph-brass);
  font-family: var(--baph-font-body);
  box-shadow: 0 2px 8px rgba(42, 35, 29, 0.3);
}

#notifications .notification.error {
  border-left-color: var(--baph-blood);
}

#notifications .notification.warning {
  border-left-color: var(--baph-brass);
}

/* ============================================================
   17. COMBAT TRACKER
       Parchment interior pages, leather header band.
   ============================================================ */
#combat-tracker {
  background: var(--baph-parchment-mid);
}

#combat-tracker .combat-tracker-header {
  background: var(--baph-leather-mid);
  color: var(--baph-parchment-bright);
  border-bottom: 2px solid var(--baph-leather-dark);
}

#combat-tracker .combatant {
  background: var(--baph-parchment-mid);
  border-bottom: 1px solid var(--baph-parchment-dark);
  color: var(--baph-ink-primary);
  transition: background 0.1s;
}

#combat-tracker .combatant:hover {
  background: var(--baph-parchment-light);
}

#combat-tracker .combatant.active {
  background: color-mix(in srgb, var(--baph-parchment-mid) 85%, var(--baph-brass) 15%);
  border-left: 3px solid var(--baph-brass);
}

/* Token name in combat tracker */
#combat-tracker .combatant .token-name .name {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-body);
}

/* Initiative value */
#combat-tracker .combatant .token-initiative .initiative {
  color: var(--baph-ink-primary);
  font-family: var(--baph-font-mono);
  font-weight: 700;
}

/* HP display */
#combat-tracker .combatant .token-resource .resource-bar {
  background: var(--baph-leather-mid);
}

#combat-tracker .combatant .token-resource .resource-bar div {
  background: var(--baph-blood);
}

/* ============================================================
   18. SCROLLBARS — Weathered, not polished
   ============================================================ */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: var(--baph-parchment-dark);
}

::-webkit-scrollbar-thumb {
  background: var(--baph-leather-mid);
  border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--baph-brass);
}

/* ============================================================
   19. SELECTION & FOCUS GLOW
       No neon. Subtle brass outline only.
   ============================================================ */
::selection {
  background: rgba(158, 125, 67, 0.3);
  color: var(--baph-ink-primary);
}

/* ============================================================
   20. GENERIC LINK & BUTTON OVERRIDES
   ============================================================ */
.app a,
.window-app a {
  color: var(--baph-brass);
  text-decoration: none;
  transition: color 0.12s;
}

.app a:hover,
.window-app a:hover {
  color: var(--baph-blood);
  text-decoration: underline;
}

/* ============================================================
   END OF FILE — baphomet-utils noir-theme.css v2.4.0
   "Croaker's Ledger" — The Black Company aesthetic
   ============================================================ */
